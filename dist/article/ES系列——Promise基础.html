<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES系列——Promise基础 | 大猿猴的前端世界</title>
    <meta name="description" content="欢迎来到我的前端世界">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <meta name="theme-color" content="#1890ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.3f5ae191.css" as="style"><link rel="preload" href="/assets/js/app.01dd3535.js" as="script"><link rel="preload" href="/assets/js/2.bcf731be.js" as="script"><link rel="preload" href="/assets/js/11.9998a03a.js" as="script"><link rel="prefetch" href="/assets/js/10.916c13ea.js"><link rel="prefetch" href="/assets/js/12.5c186018.js"><link rel="prefetch" href="/assets/js/13.6c85f7c4.js"><link rel="prefetch" href="/assets/js/14.6d847622.js"><link rel="prefetch" href="/assets/js/15.a2afff9d.js"><link rel="prefetch" href="/assets/js/16.c661c3b8.js"><link rel="prefetch" href="/assets/js/17.643f19e2.js"><link rel="prefetch" href="/assets/js/18.327fb082.js"><link rel="prefetch" href="/assets/js/19.89c49ad7.js"><link rel="prefetch" href="/assets/js/20.ed8261e8.js"><link rel="prefetch" href="/assets/js/21.6757f849.js"><link rel="prefetch" href="/assets/js/22.d0fb5cb1.js"><link rel="prefetch" href="/assets/js/23.b2669008.js"><link rel="prefetch" href="/assets/js/24.eeb936d5.js"><link rel="prefetch" href="/assets/js/25.311f3c85.js"><link rel="prefetch" href="/assets/js/26.6650c292.js"><link rel="prefetch" href="/assets/js/3.c9d6ab87.js"><link rel="prefetch" href="/assets/js/4.0087b0ef.js"><link rel="prefetch" href="/assets/js/5.a97f2123.js"><link rel="prefetch" href="/assets/js/6.b11b1271.js"><link rel="prefetch" href="/assets/js/7.759f0a29.js"><link rel="prefetch" href="/assets/js/8.ab65738d.js"><link rel="prefetch" href="/assets/js/9.aa75556b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f5ae191.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="大猿猴的前端世界" class="logo"> <span class="site-name can-hide">大猿猴的前端世界</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/article/" class="nav-link router-link-active">
  文章
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/article/" class="nav-link router-link-active">
  文章
</a></div><div class="nav-item"><a href="/more/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/article/" class="sidebar-link">HTML5系列——语义</a></li><li><a href="/article/HTML5系列——存储上.html" class="sidebar-link">HTML5系列——存储(上)</a></li><li><a href="/article/HTML5系列——存储下.html" class="sidebar-link">HTML5系列——存储(下)</a></li><li><a href="/article/HTML5系列——video实现简易版弹幕视频.html" class="sidebar-link">HTML5系列——video实现简易版弹幕视频</a></li><li><a href="/article/HTML5系列——Canvas应用.html" class="sidebar-link">HTML5系列——Canvas应用</a></li><li><a href="/article/CSS3系列——CSS3动画实现3D倒计时.html" class="sidebar-link">CSS3系列——CSS3动画实现3D倒计时</a></li><li><a href="/article/ES系列——Promise基础.html" class="active sidebar-link">ES系列——Promise基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#promise定义" class="sidebar-link">Promise定义</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#promise特点" class="sidebar-link">Promise特点</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#创建promise实例" class="sidebar-link">创建Promise实例</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#promise-api" class="sidebar-link">Promise API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_1-then-successcallback-errorcallback" class="sidebar-link">1.  then(successCallback[,errorCallback])</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_2-catch-callback" class="sidebar-link">2. catch(callback)</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_3-all-iterator" class="sidebar-link">3. all(iterator)</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_4-race-iterator" class="sidebar-link">4.race(iterator)</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_5-resolve-obj" class="sidebar-link">5.resolve([obj])</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_6-reject-reason" class="sidebar-link">6.reject(reason)</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_7-done-successcallback-errorcallback" class="sidebar-link">7.done([successCallback][,errorCallback])</a></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#_8-finally-callback" class="sidebar-link">8.finally(callback)</a></li></ul></li><li class="sidebar-sub-header"><a href="/article/ES系列——Promise基础.html#promise-缺点" class="sidebar-link">Promise 缺点</a></li></ul></li><li><a href="/article/ES系列——Generator函数与Async函数.html" class="sidebar-link">ES系列——Generator函数与Async函数</a></li><li><a href="/article/ES系列——模块化规范与ES6模块.html" class="sidebar-link">ES系列——模块化规范与ES6模块</a></li><li><a href="/article/Web技术系列——BOM基础.html" class="sidebar-link">Web技术系列——BOM基础</a></li><li><a href="/article/工具篇——markdown入门.html" class="sidebar-link">工具篇——markdown入门</a></li><li><a href="/article/工具篇——Hexo基础.html" class="sidebar-link">工具篇——Hexo基础</a></li><li><a href="/article/工具篇——使用Hexo在Github快速建站.html" class="sidebar-link">工具篇——使用Hexo在Github快速建站</a></li><li><a href="/article/工具篇——VuePress建站.html" class="sidebar-link">工具篇——VuePress建站</a></li><li><a href="/article/工具篇——VSCode如何一键生成模板.html" class="sidebar-link">工具篇——VSCode如何一键生成模板</a></li><li><a href="/article/工具篇——Postman如何作并发请求.html" class="sidebar-link">工具篇——Postman如何作并发请求</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="promise定义"><a href="#promise定义" class="header-anchor">#</a> Promise定义</h2> <p>一个对象，用于传递异步操作的消息。通过new关键字创建实例。</p> <h2 id="promise特点"><a href="#promise特点" class="header-anchor">#</a> Promise特点</h2> <ul><li><p>状态封闭性。状态不受外界改变，只有异步操作结果可以决定当前的状态。共3种状态，分别是Pending、Resolved和Rejected。 只有两种状态改变，即从Pending变为Resolved以及从Pending变为Rejected。</p></li> <li><p>状态不变性。一旦状态改变就不会再变，一直保持这个结果。比如一个Promise对象的状态已经为Resolved，根据状态不变性，再在主线程中抛错是无效的。</p></li> <li><p>状态连锁性。如果一个Promise实例传递了另一个Promise实例，那么该实例会随着要传递的Promise实例的状态变化而变化。
</p></li></ul> <h2 id="创建promise实例"><a href="#创建promise实例" class="header-anchor">#</a> 创建Promise实例</h2> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  image<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;https://www.baidu.com/img/bd_logo1.png&quot;</span><span class="token punctuation">;</span>
  image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     <span class="token function">resolve</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
     <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;wrong...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>说明：创建Promise实例时需要传入一个函数，传入的函数带有resolve函数参数和reject函数参数，这两个参数由JS引擎提供。resolve函数会将Promise对象从Pending状态转为Resolved状态，并在操作成功时将异步操作结果作为参数传递出去；而reject函数会将Promise对象从Pending状态转为Rejected状态，并在操作失败时将错误对象传递出去。</p> <h2 id="promise-api"><a href="#promise-api" class="header-anchor">#</a> Promise API</h2> <h3 id="_1-then-successcallback-errorcallback"><a href="#_1-then-successcallback-errorcallback" class="header-anchor">#</a> 1.  then(successCallback[,errorCallback])</h3> <ul><li>作用：当状态改变时进行回调处理</li> <li>参数：successCallback表示当异步操作成功时被调用的回调，errorCallback表示当异步操作失败时被调用的回调。两个回调函数都将接收Promise对象传出的值作为函数参数</li> <li>返回值：新的Promise实例，可通过链式调用需顺序执行的操作</li></ul> <h3 id="_2-catch-callback"><a href="#_2-catch-callback" class="header-anchor">#</a> 2. catch(callback)</h3> <ul><li>作用：相当于then(null,callback)，当异步操作失败时进行的回调处理</li> <li>参数：callback表示异步操作失败时被调用的回调</li> <li>返回值：新的Promise实例 ，不管有无被捕获都会继续执行接下来的方法</li></ul> <h3 id="_3-all-iterator"><a href="#_3-all-iterator" class="header-anchor">#</a> 3. all(iterator)</h3> <ul><li>作用：将多个Promise实例包装成一个新的Promise实例</li> <li>参数：迭代器对象，每个成员都是Promise对象</li> <li>返回值：新的Promise实例。当迭代器对象每个成员状态均为resolved时，状态为resolved，传递一个由各成员的返回值组成的数组，否则状态为rejected，传递第一个被rejected的成员的返回值</li></ul> <h3 id="_4-race-iterator"><a href="#_4-race-iterator" class="header-anchor">#</a> 4.race(iterator)</h3> <p>基本同all方法，不同之处在于迭代器中任一成员的状态发生变化，新实例的状态也会随之变化</p> <h3 id="_5-resolve-obj"><a href="#_5-resolve-obj" class="header-anchor">#</a> 5.resolve([obj])</h3> <ul><li>作用：转化为Promise对象，且状态为resolved</li> <li>参数：任意对象。不传递参数时直接创建Promise对象</li> <li>返回值：新的Promise对象，并传递obj参数给回调函数</li></ul> <h3 id="_6-reject-reason"><a href="#_6-reject-reason" class="header-anchor">#</a> 6.reject(reason)</h3> <p>基本同resolve方法，不同之处在于返回的新的Promise对象的状态为rejected</p> <h3 id="_7-done-successcallback-errorcallback"><a href="#_7-done-successcallback-errorcallback" class="header-anchor">#</a> 7.done([successCallback][,errorCallback])</h3> <ul><li>作用：保证抛出任何可能出现的错误</li> <li>参数：同then方法参数</li> <li>返回值：新的Promise对象</li></ul> <h3 id="_8-finally-callback"><a href="#_8-finally-callback" class="header-anchor">#</a> 8.finally(callback)</h3> <ul><li>作用：不管Promise对象最后状态如何都会执行的动作</li> <li>参数：必须执行的回调函数</li> <li>返回值：新的Promise对象</li></ul> <h2 id="promise-缺点"><a href="#promise-缺点" class="header-anchor">#</a> Promise 缺点</h2> <ul><li>一旦创建Promise实例就无法停止异步操作</li> <li>当处于Pending状态时无法得知进展到哪一阶段(刚刚开始还是即将完成)</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/article/CSS3系列——CSS3动画实现3D倒计时.html" class="prev">
        CSS3系列——CSS3动画实现3D倒计时
      </a></span> <span class="next"><a href="/article/ES系列——Generator函数与Async函数.html">
        ES系列——Generator函数与Async函数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.01dd3535.js" defer></script><script src="/assets/js/2.bcf731be.js" defer></script><script src="/assets/js/11.9998a03a.js" defer></script>
  </body>
</html>
