# 浏览器兼容性处理
## 不同终端下的浏览器制定标准和生产差异

| 终端   | 制定者        | 制定标准 | 生产者   | 生产者差异                |
|-------|--------------|---------|---------|-------------------------|
| 移动端 | Google&Apple | 系统版本 | 手机厂商 | 解决各大手机系统的浏览器兼容性 |
| PC端  | W3C          | Web标准 | 浏览器厂商 | 解决各大PC系统的浏览器兼容性 |

点击查看当前[浏览器市场份额](https://gs.statcounter.com/)

## 兼容性从检查到解决
- 明确要兼容的浏览器范围`browserlist`

  [根据设定的范围检查覆盖率](https://browsersl.ist/)

- [可选]浏览器同步测试`browsersync`

  [工具下载](https://browsersync.io/docs/command-line)

  [跨浏览器测试云平台](https://www.lambdatest.com/cross-browser-testing)

- 发现有兼容问题的属性`caniuse`
  
  [查询某特性整体兼容情况](https://caniuse.com/)

  [检查某一浏览器兼容情况](https://tests.caniuse.com)

- 解决兼容性问题`modernizr`或`browserhacks`

  modernizr——提供[完整的特征检测方法](https://github.com/Modernizr/Modernizr)，也能通过访问[此链接](https://modernizr.github.io/Modernizr/test/integration.html)检查访问的浏览器兼容情况

  browserhacks网站提供了[常见的hack处理](http://browserhacks.com/)

  ```javascript
  // 如果是CSS特性可尝试如下方式：
  const supportsCSS = window.CSS && window.CSS.supports;
  if (supportsCSS) {
    supportsCSS('display', 'flex');
  }
  ```

## CSS样式兼容前缀
- 针对同一样式属性，分别为不同浏览器添加属性前缀，具体如下

  | 属性前缀 | 浏览器内核 | 浏览器 |
  |--------|-----------|--------|
  | -webkit- | WebKit | Safari、Chrome、Edge、Android、IOS |
  | -moz- | Gecko | Firefox |

<!-- ## 实战
- 问：Safari本地上传文件，结果是直接插入一个`src`指向本地的`img`标签，如何获取文件内容？
  
  通过发送请求，加载本地blob数据，然后通过`FileReader`读取

- 问：Window Chrome下`input[type=file]`打开时卡顿

  Chrome的SafeBrowsing功能在上传或保存时检查文件。若网络连接到google的速度较慢，则SafeBrowsing会让Chrome挂起一段时间，直到文件检查结束或者超时

  使用`accept="image/png,image/jpeg,image/gif"`可以解决该问题，因为这些MIME类型在SafeBrowsing白名单里，不需要检查。而使用`accept="image/*"`的话，可能会变卡 -->
